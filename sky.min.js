var e={};window.addEventListener("load",(()=>{setTimeout((()=>{o.go(n.screen)}),10)})),Game.intro={firstPage:()=>{r("\n        \n        There's a sound. It's not good. Your brain, still steeped in hyper-sleep chemicals, has come round to the point\n        where you're awake and something has gone woefully awry.\n\n        It's an alarm. An alarm is ringing from the engine.\n\n        The hyper-sleep containment unit swings open and your feet find the cold metal floor. The air of your ship is \n        thick with smoke.\n\n        "),s("Ugghh... It's too early for an emergency...",(()=>h(e.intro.secondPage)))},secondPage:()=>{r("\n        \n        Then another sound: this one is sudden and shakes the entire ship. You grasp a bulkhead and nearly slice your fingers on\n        the cheap titanium bolts holding your ship together. Another shake, like being inside dump truck that's currently\n        in the process of traversing to Mars with a catapult.\n\n        After that, everything is still. The alarm was still ringing. Your engineer, and the only member of your crew, Yates,\n        emerges into your still blurry vision.\n        \n        "),s("Yates! What happened?",(()=>h(e.intro.thirdPage)))},thirdPage:()=>{r('\n        \n        "Sorry, boss," said Yates with a noisy slurp. He was drinking something. Slowly it dawned on you; it was a ginormous can of raspberry soda pop,\n        festooned with a cherry-red flamingo straw.\n\n        "Not sure how it happened, but somebody got raspberry soda all over the engine core. Had to make an emergency landing till\n        we can fix this rig. Shouldn\'t be more than a couple of weeks.\n        \n        '),s("Did you say two weeks?",(()=>h(e.myShip.outside)))}},Game.spaceKing={preventWar:!1,intro:()=>{d('\n        \n        A man stands before you, but more than merely a man. He reminds you of a mix of Hercules and Adonis, only ten times more\n        ripped. His solemn expression smacks of both seriousness and kind benevolence.\n\n        "Greetings," he said in rich theatrical tones. He paused for effect. "I am a nearly omnipotent entity in a form you are\n        assuredly comfortable with. My name... is Space King."\n\n        The stars above seem to whisper "Space King" in hushed tones as he says the words.\n        \n        ',"\n        \n        Space King stands before you, clad in a magnificent chartreuse toga. He favors you with a gaze of kindly regard befitting a much lesser life form.\n\n        "),l("Never heard of you",'\n        \n        Space King\'s eyes light with a kind of greenish fire that gives you a slight tremble. "Well," he said, "Like as not, I\'m very important."\n        \n        '),s("Nice to meet you",'\n        \n        "It is, isn\'t it," said Space King. "It is very nice to meet me, of course. I\'m thinking of adding a dash to my name. You know,\n        Space-King. It sounds more grand and purposeful."\n        \n        '),e.spaceKing.preventWar&&s("So what are you doing to prevent war?",'\n              \n              "Sadly, very little at the moment," said Space King, "For my rheumatism is getting the better of me right now.\n              That\'s why I\'m standing by this lake, attempting to get some fresh air."\n              \n              '),l("What are you doing *here* of all places?",(()=>{e.spaceKing.preventWar=!0,r('\n        \n        "A fair question," nodded Space King. “After all, why should a being of my incredible talent be relegated to dealing with such limited\n        mortals?\n\n        “Well, the answer is simple. Any second, war will erupt on this planet that will engulf the universe. My role is to prevent billions\n        from dying. The catastrophe about to take place is potentially greater than that of Smellus IV.”\n        \n        '),s("Smellus IV?",'\n        \n            “Ah, Smellus IV. The indigenous creatures had no vocal cords, so their whole civilization learned to communicate with finely \n            honed intestinal odors. In a stupendously bad bit of schedule overlap, the Great Interstellar Peace Talks on Smellus took place on\n            Taco Tuesday.\n\n            “Then, in an attempt to resume the Talks, a well-intentioned but misguided diplomat purchased an elaborate catered lunch\n            for the entire event, from Arby\'s.” Space King shook his head. "Tragic." \n        \n        ')}))}},Game.myShip={stillHere:!0,cockpit:()=>{r("\n        \n            Your command chair is surrounded by an array of screens, lights and controls telling you every detail\n            of what's happening on your ship. Right now, they're all very upset for some reason. A distant alarm\n            echoes from the engine cavity. A sturdy metal ladder descends to the main deck.\n\n        "),s("Climb down to the Main Deck",(()=>h(e.myShip.mainDeck))),s("Sit in the chair","You sit in the command chair and feel very heroic."),s("Look out the window","The purple sky and distant golden mountains don't resemble any planet you've visited before.")},mainDeck:()=>{r("\n    \n    This part of the ship is the least damaged—it's a pretty good thing you were here during the crash. The hyper-sleep pod is depowered,\n    along with most everything else on this deck. Yates will probably have all the systems on and off about a hundred times before\n    we can limp to a repair shop.\n    \n    "),s("Go to the cockpit",(()=>h(e.myShip.cockpit))),s("Exit the ship",(()=>h(e.myShip.outside)))},outside:()=>{e.myShip.stillHere&&(r("\n    \n    Your ship lies in a crumpled heap at the top of a hill. Yates is kneeled next to an open panel, attempting repairs. A winding\n    path leads down to a humble little village.\n    \n    "),s("Hey, Yates",(()=>h(e.yates.intro))),s("Enter the ship",(()=>h(e.myShip.mainDeck)))),s("Go down to the village",(()=>h(e.village.mainPath)))}};const n={screen:()=>{r("\n        \n            Title Screen\n\n        "),d("The cat waits",["foo","bar","foozle","muddle"]),s("Start",(()=>{e={...Game},console.log(e),h(e.spaceKing.intro)})),s("About",(()=>o.go(n.about)))},about:()=>{r("\n\n            About this book\n\n        "),s("OK Then",(()=>h(n.screen))),s("About","Why Cat!!")}},t={backButtonHidden:!1,clear:()=>{document.getElementById("Buttons").innerHTML=""},displayOnce:(n,o)=>{const r=`d${function(){var e=0;if(0==n.length)return e;for(i=0;i<n.length;i++)char=n.charCodeAt(i),e=(e<<5)-e+char,e&=e;return e}()}`;e[r]||t.add(n,(()=>{e[r]=!0,"string"==typeof o?a.set(o):o()}))},add:(e,n)=>{const i=document.getElementById("Buttons");if(i){e=e.trim();const r=document.createElement("button");r.onclick=()=>{a.clear(),t.clear(),t.backButtonHidden=!1,"string"==typeof n?a.set(n):n(),t.backButtonHidden||t.add("Back",(()=>{o.go(o.lastCallback)})),t.backButtonHidden=!0},r.className="Choice",r.innerHTML=u(e),i.appendChild(r)}}},a={clear:()=>{document.getElementById("Output").innerHTML=""},add:e=>{const n=document.getElementById("Output");if(n){e=e.split("\n\n").filter((e=>""!==e.trim()));for(const t of e){const e=document.createElement("p");e.innerHTML=u(t),n.appendChild(e)}}},set:e=>{a.clear(),a.add(e)}},o={lastCallback:()=>{},go:e=>{t.backButtonHidden=!0,e(),o.lastCallback=e}},r=e=>a.add(e),s=(e,n)=>t.add(e,n),l=(e,n)=>t.displayOnce(e,n),h=e=>o.go(e),d=(n,t)=>((n,t)=>{const a=`i${function(){var e=0;if(0==n.length)return e;for(i=0;i<n.length;i++)char=n.charCodeAt(i),e=(e<<5)-e+char,e&=e;return e}()}`;e[a]?Array.isArray(t)?c(t):r(t):(e[a]=!0,r(n))})(n,t),c=e=>(e=>{const n=function(e){let n,t=e.length;for(;0!=t;)n=Math.floor(Math.random()*t),t--,[e[t],e[n]]=[e[n],e[t]];return e}([...e]);r(n[0])})(e),u=e=>{const n={quote:!0,bold:!0,italic:!0},t=(t,a,o)=>{for(;e.indexOf(t)>-1;)e=n[a]?e.replace(t,`<${o}>`):e.replace(t,`</${o}>`),n[a]=!n[a]};return t('"',"quote","q"),t("**","bold","b"),t("*","italic","i"),e=e.trim()};